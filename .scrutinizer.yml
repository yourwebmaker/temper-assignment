build:
  nodes:
    coverage:
      tests:
        override:
          - command: ./vendor/bin/phpunit tests --coverage-clover coverage
            coverage:
              file: coverage

              # These formats are supported:
              # clover, cobertura, jacoco, python-cc, ruby-cc, go-cc, lcov
              format: clover
tools:
  php_cs_fixer: false
filter:
  excluded_paths:
    - 'tests/'
    - 'public/'
    - 'data/'
    - 'vendor/'
checks:
  php: true
    nodes:
      analysis:
        environment:
          mysql: false
          postgresql: false
          redis: false
          rabbitmq: false
          mongodb: false
          php:
            version: 7.3

        project_setup:
          override: true
        tests:
          override:
            - php-scrutinizer-run
            - phpcs-run

    dependencies:
      override:
        - composer install --no-interaction --prefer-dist

